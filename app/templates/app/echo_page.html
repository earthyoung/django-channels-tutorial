<!doctype HTML>
<html lang="ko">
    <body>
        <script>
            
            const ws = new WebSocket("ws://localhost:8000/ws/echo/");

            ws.onopen = () => {
                console.log("웹소켓 서버와 접속");
            };

            ws.onmessage = (event) => {
                const message = event.data;
                const obj = JSON.parse(message);
                console.log("문자열 수신: ", message);
                console.log(obj);
            };

            ws.onerror = () => {
                console.error("웹소켓 에러 발생");
            };

            ws.onclose = (event) => {
                if(event.wasClean) {
                    console.log("ws.clean()에 의한 연결 끊김");
                } else {
                    console.log("웹소켓 서버의 연결이 죽음");
                }
            };

        </script>
    </body>
</html>